<div align="center">

# <img src="docs/logo.svg" width="28" height="28" alt="IP å“¨å…µ" /> IP å“¨å…µ

**å¤šæº IP æƒ…æŠ¥åˆ†æå·¥å…· Â· ç½‘ç»œèº«ä»½å¯è§æ€§æ£€æµ‹**

[![Cloudflare Workers](https://img.shields.io/badge/Cloudflare-Workers-F38020?logo=cloudflare&logoColor=white)](https://workers.cloudflare.com/)
[![React](https://img.shields.io/badge/React-18-61DAFB?logo=react&logoColor=white)](https://react.dev/)
[![License](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)

åˆ†æå„æœåŠ¡å•†ä¸‹çš„è¿æ¥å¯è§æ€§ï¼Œæ£€æµ‹ IP æš´éœ²æƒ…å†µï¼Œé€šè¿‡å®æ—¶é£æ§è¯„åˆ†æ£€æŸ¥ä»£ç†/VPN æ³„æ¼ã€‚

[**ğŸš€ å¿«é€Ÿå¼€å§‹éƒ¨ç½² â†’**](#-å¿«é€Ÿå¼€å§‹)

</div>

---

## ğŸ“¸ ç•Œé¢é¢„è§ˆ

#### â˜€ï¸ æ—¥é—´æ¨¡å¼

![IP å“¨å…µ - æ—¥é—´æ¨¡å¼](docs/screenshot.png)

#### ğŸŒ™ å¤œé—´æ¨¡å¼

![IP å“¨å…µ - å¤œé—´æ¨¡å¼](docs/screenshot-dark.png)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸŒ å¤šæº IP æ£€æµ‹
åŒæ—¶ä» **8 ä¸ªä¸åŒçš„æ•°æ®æº** è·å–ä½ çš„å‡ºå£ IPï¼Œç›´è§‚å¯¹æ¯”å„å¹³å°çœ‹åˆ°çš„çœŸå®è¿æ¥ä¿¡æ¯ï¼š

| æ•°æ®æº | æè¿° |
|--------|------|
| **Cloudflare Worker** | å½“å‰è¿æ¥çš„ Inbound IPï¼ˆæœåŠ¡ç«¯ç›´å‡ºï¼Œæœ€å‡†ç¡®ï¼‰ |
| **IP.SB IPv4** | çº¯ IPv4 å‡ºå£åœ°å€ |
| **IP.SB IPv6** | çº¯ IPv6 å‡ºå£åœ°å€ |
| **IPAPI.is** | ç»¼åˆ IP æƒ…æŠ¥å¹³å° |
| **ChatGPT** | é€šè¿‡ `chatgpt.com` çš„ CDN Trace æ£€æµ‹ |
| **X.com** | é€šè¿‡ `help.x.com` çš„ CDN Trace æ£€æµ‹ |
| **OpenAI** | é€šè¿‡ `openai.com` çš„ CDN Trace æ£€æµ‹ |
| **Grok** | é€šè¿‡ `grok.com` çš„ CDN Trace æ£€æµ‹ |
| **WebRTC æ¢æµ‹** | é€šè¿‡ RTCPeerConnection ICE candidates æ£€æµ‹ IP æ³„æ¼ |
| **DNS æ¢æµ‹** | é€šè¿‡ DoH æŸ¥è¯¢æ£€æµ‹ DNS è§£æå™¨å’Œå‡ºå£ IP |

### ğŸ” IP æ·±åº¦åˆ†æ
ç‚¹å‡»ä»»æ„ IP åœ°å€ï¼ŒæŸ¥çœ‹æ¥è‡ª [ipapi.is](https://ipapi.is) çš„è¯¦ç»†æƒ…æŠ¥ï¼š

- **åŸºæœ¬ä¿¡æ¯** â€” IP åœ°å€ã€RIRã€è¿è¥å•†/ASN ç±»å‹ï¼ˆä½å®…/æœºæˆ¿/å•†ç”¨ï¼‰
- **ç»¼åˆæ»¥ç”¨è¯„åˆ†** â€” åŸºäºè¿è¥å•†åˆ† + ASN åˆ† + é£é™©åŠ æˆçš„æ™ºèƒ½è¯„åˆ†ç®—æ³•
- **å®‰å…¨æ£€æµ‹** â€” ä»£ç†ã€VPNã€Torã€çˆ¬è™«ã€æ»¥ç”¨ IPã€æ•°æ®ä¸­å¿ƒç­‰ 9 é¡¹æ£€æµ‹
- **ä½ç½®ä¿¡æ¯** â€” å›½å®¶ã€çœä»½ã€åŸå¸‚ã€åæ ‡ã€æ—¶åŒº
- **è¿è¥å•† & ASN ä¿¡æ¯** â€” ç»„ç»‡åç§°ã€è·¯ç”±ã€æ»¥ç”¨è¯„åˆ†
- **æ»¥ç”¨ä¸¾æŠ¥è”ç³»æ–¹å¼** â€” æä¾›ç›¸å…³æŠ•è¯‰æ¸ é“

### ğŸ¯ VPN / ä»£ç†æ³„æ¼æ£€æµ‹
é€šè¿‡å¯¹æ¯”å¤šä¸ªæ•°æ®æºè¿”å›çš„ IP å’Œåœ°ç†ä½ç½®ï¼Œå¿«é€Ÿåˆ¤æ–­æ˜¯å¦å­˜åœ¨ï¼š
- ä»£ç†/VPN æ³„æ¼ï¼ˆä¸åŒå¹³å°çœ‹åˆ°ä¸åŒ IPï¼‰
- **DNS æ³„æ¼** â€” é€šè¿‡ Cloudflare DoH å’Œ Google DNS æ£€æµ‹å®é™…ä½¿ç”¨çš„ DNS è§£æå™¨
- **WebRTC æ³„æ¼** â€” é€šè¿‡ RTCPeerConnection ICE candidates æ£€æµ‹æœ¬åœ°/å…¬ç½‘ IP æš´éœ²

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              æµè§ˆå™¨ (React 18)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ çŠ¶æ€å¡ç‰‡ â”‚ â”‚ è¯¦æƒ…å¼¹çª— â”‚ â”‚ é£é™©è¯„åˆ†å¼•æ“   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚       â”‚           â”‚                           â”‚
â”‚  ç›´æ¥è¯·æ±‚å¤–éƒ¨ API    é€šè¿‡ Worker ä¸­è½¬           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚           â”‚
        â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å¤–éƒ¨ CDN Traceâ”‚  â”‚ Cloudflare Worker    â”‚
â”‚ ip.sb / etc. â”‚  â”‚ (API ä¸­è½¬ + SSR æ³¨å…¥) â”‚
â”‚              â”‚  â”‚  â†’ ipapi.is API      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **å‰ç«¯**ï¼šReact 18 + Tailwind CSSï¼ˆé€šè¿‡ CDN å¼•å…¥ï¼Œå•æ–‡ä»¶ SPAï¼‰
- **åç«¯**ï¼šCloudflare Workersï¼ˆé›¶æœåŠ¡å™¨ï¼Œè¾¹ç¼˜è®¡ç®—ï¼‰
- **API ä¸­è½¬**ï¼šWorker ä»£ç† ipapi.is è¯·æ±‚ï¼Œè§„é¿ CORS é™åˆ¶
- **SSR æ³¨å…¥**ï¼šæœåŠ¡ç«¯ç›´æ¥æ³¨å…¥ Cloudflare è¯†åˆ«çš„è®¿å®¢ IP å’Œåœ°ç†ä¿¡æ¯

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **SSRF é˜²æŠ¤** â€” ä¸¥æ ¼æ ¡éªŒ IP/åŸŸåè¾“å…¥æ ¼å¼
- **XSS é˜²æŠ¤** â€” JSON æ•°æ®å®‰å…¨è½¬ä¹‰åæ³¨å…¥ HTML
- **å®‰å…¨å“åº”å¤´** â€” `X-Content-Type-Options`ã€`X-Frame-Options`ã€`Referrer-Policy`
- **CORS æ§åˆ¶** â€” é…ç½®è·¨åŸŸèµ„æºå…±äº«ç­–ç•¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### âš¡ ä¸€é”®éƒ¨ç½²

ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œå³å¯è‡ªåŠ¨è·³è½¬åˆ° Cloudflare éƒ¨ç½²é¡µé¢ï¼Œè‡ªåŠ¨å…‹éš†ä»“åº“å¹¶å®Œæˆéƒ¨ç½²ï¼š

[![Deploy to Cloudflare](https://deploy.workers.cloudflare.com/button)](https://deploy.workers.cloudflare.com/?url=https://github.com/jy02739244/ip-query-worker)

### ğŸ”— Fork éƒ¨ç½²ï¼ˆæ¨èï¼‰

Fork éƒ¨ç½²å¯ä»¥ä¿æŒä¸ä¸Šæ¸¸ä»“åº“çš„å…³è”ï¼Œæ–¹ä¾¿åç»­åŒæ­¥æ›´æ–°ï¼š

**ç¬¬ä¸€æ­¥**ï¼šFork æœ¬ä»“åº“åˆ°ä½ çš„ GitHub è´¦å·

[![Fork this repo](https://img.shields.io/badge/GitHub-Fork_æœ¬ä»“åº“-blue?style=for-the-badge&logo=github)](https://github.com/jy02739244/ip-query-worker/fork)

**ç¬¬äºŒæ­¥**ï¼šç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ï¼Œé€‰æ‹© **Continue with GitHub**ï¼Œç„¶åé€‰æ‹©ä½  Fork çš„ä»“åº“è¿›è¡Œéƒ¨ç½²

[![Deploy with Cloudflare](https://img.shields.io/badge/Cloudflare-éƒ¨ç½²åˆ°_Workers-F38020?style=for-the-badge&logo=cloudflare&logoColor=white)](https://dash.cloudflare.com/?to=/:account/workers-and-pages/create)

> [!TIP]
> å½“ä¸Šæ¸¸ä»“åº“æ›´æ–°åï¼Œä½ å¯ä»¥åœ¨ GitHub ä¸­ç‚¹å‡» **Sync fork** åŒæ­¥æœ€æ–°ä»£ç ï¼ŒCloudflare ä¼šè‡ªåŠ¨é‡æ–°æ„å»ºéƒ¨ç½²ã€‚

### æ‰‹åŠ¨éƒ¨ç½²ï¼ˆæ— éœ€æœ¬åœ°ç¯å¢ƒï¼‰

å¦‚æœä¸æƒ³é…ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ Cloudflare Dashboard æ‰‹åŠ¨éƒ¨ç½²ï¼š

1. ç™»å½• [Cloudflare Dashboard](https://dash.cloudflare.com/)
2. è¿›å…¥ **Workers & Pages** â†’ ç‚¹å‡» **åˆ›å»º** â†’ é€‰æ‹© **åˆ›å»º Worker**
3. ä¸º Worker å‘½åå¹¶ç‚¹å‡» **éƒ¨ç½²**ï¼ˆå…ˆéƒ¨ç½²é»˜è®¤çš„ Hello World ä»£ç ï¼‰
4. éƒ¨ç½²æˆåŠŸåï¼Œç‚¹å‡» **ç¼–è¾‘ä»£ç **
5. å°†æœ¬é¡¹ç›® `src/_worker.js` æ–‡ä»¶çš„ **å…¨éƒ¨å†…å®¹** å¤åˆ¶å¹¶ç²˜è´´åˆ°ç¼–è¾‘å™¨ä¸­ï¼Œæ›¿æ¢åŸæœ‰ä»£ç 
6. ç‚¹å‡»å³ä¸Šè§’ **éƒ¨ç½²** æŒ‰é’®ä¿å­˜å¹¶å‘å¸ƒ

> [!TIP]
> åç»­æ›´æ–°æ—¶ï¼Œåªéœ€é‡å¤æ­¥éª¤ 4-6ï¼Œå°†æœ€æ–°çš„ `src/_worker.js` å†…å®¹ç²˜è´´å¹¶é‡æ–°éƒ¨ç½²å³å¯ã€‚

### å‰ç½®æ¡ä»¶

- [Node.js](https://nodejs.org/) >= 18
- [Wrangler CLI](https://developers.cloudflare.com/workers/wrangler/) (Cloudflare Workers CLI)

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/jy02739244/ip-query-worker.git
cd ip-query-worker

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æœ¬åœ°å¼€å‘æœåŠ¡å™¨
npm run dev
```

è®¿é—® `http://localhost:8787` å³å¯é¢„è§ˆã€‚

### éƒ¨ç½²åˆ° Cloudflare

```bash
# ç™»å½• Cloudflare
npx wrangler login

# éƒ¨ç½²
npm run deploy
```



### è¿è¡Œæµ‹è¯•

```bash
npm test
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
ip-query-worker/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ _worker.js       # æ ¸å¿ƒä»£ç ï¼ˆWorker + React SPA å•æ–‡ä»¶ï¼‰
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ screenshot.png    # ç•Œé¢æˆªå›¾ï¼ˆæ—¥é—´æ¨¡å¼ï¼‰
â”‚   â””â”€â”€ screenshot-dark.png # ç•Œé¢æˆªå›¾ï¼ˆå¤œé—´æ¨¡å¼ï¼‰
â”œâ”€â”€ package.json          # é¡¹ç›®é…ç½® & ä¾èµ–
â”œâ”€â”€ wrangler.toml         # Cloudflare Workers é…ç½®
â”œâ”€â”€ vitest.config.js      # æµ‹è¯•é…ç½®
â””â”€â”€ README.md             # é¡¹ç›®è¯´æ˜
```

## ğŸ“Š æ•°æ®æºè¯´æ˜

| æ•°æ®æº | ç”¨é€” | è¯·æ±‚æ–¹å¼ |
|--------|------|----------|
| `Cloudflare cf` å¯¹è±¡ | å½“å‰è¿æ¥ IPï¼ˆæœåŠ¡ç«¯ï¼‰ | Worker SSR æ³¨å…¥ |
| `api-ipv4.ip.sb` | IPv4 åœ°å€ + åœ°ç†ä¿¡æ¯ | æµè§ˆå™¨ç›´è¿ |
| `api-ipv6.ip.sb` | IPv6 åœ°å€ + åœ°ç†ä¿¡æ¯ | æµè§ˆå™¨ç›´è¿ |
| `api.ipapi.is` | ç»¼åˆ IP æƒ…æŠ¥ï¼ˆå«é£æ§ï¼‰ | Worker ä¸­è½¬ |
| `*/cdn-cgi/trace` | CDN å‡ºå£ IP | æµè§ˆå™¨ç›´è¿ |
| `RTCPeerConnection` | WebRTC æ³„æ¼æ£€æµ‹ï¼ˆæœ¬åœ°/å…¬ç½‘ IPï¼‰ | æµè§ˆå™¨ API |
| `cloudflare-dns.com` | DNS è§£æå™¨æ£€æµ‹ï¼ˆDoHï¼‰ | æµè§ˆå™¨ç›´è¿ |
| `dns.google` | DNS è§£æå™¨æ£€æµ‹ï¼ˆå¤‡ç”¨ DoHï¼‰ | æµè§ˆå™¨ç›´è¿ |
| `1.1.1.1/cdn-cgi/trace` | DNS å‡ºå£ IP å’Œä½ç½® | æµè§ˆå™¨ç›´è¿ |

## ğŸ“ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº [MIT](LICENSE) è®¸å¯è¯å¼€æºã€‚

## ğŸ™ è‡´è°¢

- [Cloudflare Workers](https://workers.cloudflare.com/) â€” è¾¹ç¼˜è®¡ç®—å¹³å°
- [ipapi.is](https://ipapi.is/) â€” IP æƒ…æŠ¥ API
- [ip.sb](https://ip.sb/) â€” IP æŸ¥è¯¢æœåŠ¡
- [React](https://react.dev/) â€” å‰ç«¯æ¡†æ¶
- [Tailwind CSS](https://tailwindcss.com/) â€” CSS æ¡†æ¶
- [Cmliu Github](https://github.com/cmliu) â€” CM
